"use strict";angular.module("calculatorApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("calculatorApp").controller("MainCtrl",["$scope",function(a){a.num=[],a.history=[],a.opt=[],a.result="",a.flag=!0,a.isOpt=!0,a.data={1:["AC","+/-","%","÷"],2:["7","8","9","×"],3:["4","5","6","－"],4:["1","2","3","＋"],5:["0",".","="]},a.init=function(){a.num=[],a.opt=[],a.history=[],a.flag=!0,a.isOpt=!0},a.showClass=function(a,b){return 0==b?"zero":3==a||"="==b?"end-no":"normal"},a.showResult=function(b){a.history.push(b);var c=/\d/gi,d=/\./gi,e=/\//gi;if(c.test(b))0==a.isOpt&&(a.isOpt=!0),0!=a.result&&a.flag&&"error"!=a.result?a.result+=b:(a.result=b,a.flag=!0);else if("AC"==b)a.result=0,a.init();else if("."==b)""==a.result||d.test(a.result)||(a.result+=b);else if(e.test(b))a.result=a.result>0?"-"+a.result:Math.abs(a.result);else if("%"==b)a.result=a.format(Number(a.result)/100);else if(a.checkOperator(b)&&""!=a.result&&"error"!=a.result&&a.isOpt)a.flag=!1,a.num.push(a.result),a.operation(b),a.isOpt=!1;else if("="==b&&""!=a.result&&"error"!=a.result)for(a.flag=!1,a.num.push(a.result);0!=a.opt.length;){var f=a.opt.pop(),g=a.num.pop(),h=a.num.pop();a.calculate(h,f,g)}},a.operation=function(b){if(!a.opt.length)return void a.opt.push(b);var c,d,e,f=a.opt[a.opt.length-1];a.isPri(b,f)?a.opt.push(b):(c=a.opt.pop(),d=a.num.pop(),e=a.num.pop(),a.calculate(e,c,d),a.operation(b))},a.isPri=function(a,b){return a==b?!1:"×"==a||"÷"==a?"×"==b||"÷"==b?!1:!0:!1},a.calculate=function(b,c,d){switch(c){case"＋":a.result=a.format(Number(b)+Number(d)),a.num.push(a.result);break;case"－":a.result=a.format(Number(b)-Number(d)),a.num.push(a.result);break;case"×":a.result=a.format(Number(b)*Number(d)),a.num.push(a.result);break;case"÷":0==d?(a.result="error",a.init()):(a.result=a.format(Number(b)/Number(d)),a.num.push(a.result))}},a.format=function(a){var b=/.{10,}/gi;return b.test(a)?/\./.test(a)?a.toExponential(3):a.toExponential():a},a.checkOperator=function(a){return"＋"==a||"－"==a||"×"==a||"÷"==a?!0:!1}}]),angular.module("calculatorApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);