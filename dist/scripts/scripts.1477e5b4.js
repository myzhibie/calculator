"use strict";angular.module("calculatorApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("calculatorApp").controller("MainCtrl",["$scope",function(a){a.list=[],a.result="",a.data={1:["AC","+/-","%","÷"],2:["7","8","9","×"],3:["4","5","6","－"],4:["1","2","3","＋"],5:["0",".","="]},a.showClass=function(a,b){return 0==b?"zero":3==a||"="==b?"end-no":"normal"},a.flag=!0,a.history=["<<"],a.showResult=function(b){var c=/\d/gi,d=/\./gi,e=/\//gi;c.test(b)?(0!=a.result&&a.flag&&"error"!=a.result?a.result+=b:(a.result=b,a.flag=!0,"fx"==a.list[a.list.length-1]&&a.list.pop()),console.log(a.list)):"AC"==b?(a.result=0,a.list=[],a.history=["<<"]):"."==b?""==a.result||d.test(a.result)||(a.result+=b):e.test(b)?a.result=a.result>0?"-"+a.result:Math.abs(a.result):"%"==b?(a.result=a.format(Number(a.result)/100),a.history.push(b)):a.checkOperator(b)&&""!=a.result&&"error"!=a.result&&(a.flag=!1,">>"==a.history[a.history.length-1]&&(a.history=["<<"]),a.history.push(a.result),a.history.push(b),"fx"!=a.list[a.list.length-1]&&(a.list.push(a.result),console.log(a.list),1==a.list.length?a.list.push(b):3==a.list.length&&a.calculate(b)),"="==b&&(a.history.push(a.result),a.history.push(">>")))},a.calculate=function(b){console.log("cal");var c=a.list.shift();console.log(c);var d=a.list.shift();console.log(d);var e=a.list.shift();switch(console.log(e),d){case"＋":a.result=a.format(Number(c)+Number(e)),"="!=b&&a.list.push(a.result,b,"fx");break;case"－":a.result=a.format(Number(c)-Number(e)),"="!=b&&a.list.push(a.result,b,"fx");break;case"×":a.result=a.format(Number(c)*Number(e)),"="!=b&&a.list.push(a.result,b,"fx");break;case"÷":0==e?(a.result="error",a.list=[]):(a.result=a.format(Number(c)/Number(e)),"="!=b&&a.list.push(a.result,b,"fx"))}console.log(a.list)},a.format=function(a){var b=/.{10,}/gi;return b.test(a)?/\./.test(a)?a.toExponential(3):a.toExponential():a},a.checkOperator=function(a){return"＋"==a||"－"==a||"×"==a||"÷"==a||"="==a||"%"==a?!0:!1}}]),angular.module("calculatorApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);